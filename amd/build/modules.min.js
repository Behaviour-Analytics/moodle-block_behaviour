/*! moodle-block_behaviour v0.6.2 07-05-2020 */

define(["block_behaviour/d3","block_behaviour/nouislider","block_behaviour/mersenne-twister","block_behaviour/behaviour-analytics"],function(k,n,r,t){return{init:function(){k.concaveHull=function(){var y,m=function(n){var r=[];n.forEach(function(n){r.push(g(n[0],n[1])),r.push(g(n[0],n[2])),r.push(g(n[1],n[2]))});var t=k.deviation(r);return k.mean(r)+t},w=0;function g(n,r){var t=n[0]-r[0],i=n[1]-r[1];return Math.sqrt(t*t+i*i)}function r(n){y=k.voronoi().triangles(n);var r,t=m(y),i=y.filter(function(n){return g(n[0],n[1])<t&&g(n[0],n[2])<t&&g(n[1],n[2])<t}),e={},o={},a=[];i.forEach(function(n){for(var r=0;r<3;r++){var t=[n[r],n[(r+1)%3]].sort(x).map(String);(o[t[0]]=o[t[0]]||[]).push(t[1]),(o[t[1]]=o[t[1]]||[]).push(t[0]);var i=t.join(":");e[i]?delete e[i]:e[i]=1}});for(var p,u,c=!0;c;){var f=null;for(f in e)break;if(null===f){c=!1;break}a.push(r=f.split(":").map(function(n){return n.split(",").map(Number)})),delete e[f];for(var h=r[1];h[0]!==r[0][0]||h[1]!==r[0][1];)for(var s=h,v=o[s.join(",")],l=v.length,b=0;b<l;b++){var d=[s,h=v[b].split(",").map(Number)].sort(x).join(":");if(e[d]){delete e[d],r.push(h);break}}}return 0!==w&&(p=w,u=[],a.forEach(function(s){var v=[],e=0;s.forEach(function(n,r){var t=r-1;0==r&&(t=s.length-1);var i=s[t];e+=(n[0]-i[0])*(n[1]+i[1])/2});var l=0<e?-1:1;s.forEach(function(n,r){var t=r-1;0==r&&(t=s.length-2);var i,e,o,a,u,c,f=(i=n,e=s[t],o={x:e[0]-i[0],y:e[1]-i[1]},a=Math.sqrt(o.x*o.x+o.y*o.y),o.x/=a,o.y/=a,o),h=(u=f,c=90*l,c*=Math.PI/180,{x:u.x*Math.cos(c)-u.y*Math.sin(c),y:u.x*Math.sin(c)+u.y*Math.cos(c)});v.push([n[0]+h.x*p,n[1]+h.y*p])}),u.push(v)}),a=u),a}function x(n,r){return n[0]===r[0]?r[1]-n[1]:r[0]-n[0]}return r.padding=function(n){return arguments.length?(w=n,r):w},r.distance=function(n){return arguments.length?(m="number"==typeof n?function(){return n}:n,r):m},r},window.dataDrivenDocs=k,window.noUiSlider=n,window.mersenneTwister=r,window.behaviourAnalytics=t}}});