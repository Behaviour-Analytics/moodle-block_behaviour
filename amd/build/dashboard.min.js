/*! moodle-block_behaviour v0.9.1 14-03-2022 */

!function(e){"function"==typeof define&&define.amd?define([],e):window.behaviourAnalyticsDashboard=e()}(function(){return function(k){var e,m=0,v={},y={},h=!1,L=!1;function f(e){var t,n,i,a,l=null,d=!1,r=document.createElement("div");r.id="question-list";function s(e,t){for(var n,i=0;document.getElementById("option-div-"+e+"-"+i);)n=document.getElementById("option-div-"+e+"-"+i),i++;b(n,t.langstrings.option,e,i,!0)}var o,c=Object.keys(v).sort(function(e,t){return v[e].ordering>v[t].ordering});for(o in c){if(d=!1,(l=document.createElement("div")).id="qdiv-"+c[o],v[c[o]].edit?((i=document.createElement("input")).type="text",i.id="question-"+c[o],i.value=v[c[o]].qtext,d=!0,l.appendChild(i)):l.appendChild(document.createTextNode(v[c[o]].qtext)),l.appendChild(document.createElement("br")),"binary"==v[c[o]].qtype||"custom"==v[c[o]].qtype)if(v[c[o]].edit)for(n in y[c[o]])E(l,y[c[o]][n],c[o],n);else for(n in y[c[o]])x(l,y[c[o]][n]);else if("multiple"==v[c[o]].qtype)if(v[c[o]].edit){for(n in y[c[o]])b(l,y[c[o]][n],c[o],n);var u=document.createElement("button");u.textContent=e.langstrings.addoption,u.id="add-option",u.addEventListener("click",s.bind(this,c[o],e)),l.appendChild(u)}else for(n in y[c[o]])!function(e,t){var n=document.createElement("div"),i=document.createElement("input");i.type="checkbox",i.disabled=!0;var a=document.createElement("label");a.appendChild(document.createTextNode(t)),a.style.marginLeft="5px",n.appendChild(i),n.appendChild(a),e.appendChild(n)}(l,y[c[o]][n]);else if("open"==v[c[o]].qtype)(i=document.createElement("textarea")).disabled=!0,l.appendChild(i);else for(var p in a=e.langstrings[v[c[o]].qtype+"scale"].split(","))x(l,a[p]);t=function(a,i,l,e){var t=document.createElement("div");t.id="qdiv-header-"+l;var n=document.createTextNode(i);t.appendChild(n);n=document.createElement("img");n.src=a.uparrowurl,n.style.marginLeft="12px",1===i?n.style.opacity=0:n.addEventListener("click",function(){var e,t=0;for(e in v)if(v[e].ordering===i-1){v[e].ordering++,t=e;break}v[l].ordering--,f(a);var n={courseid:a.courseid,minusqid:l,plusqid:t};w(a.changequestionurl,n,a)});t.appendChild(n);n=document.createElement("img");n.src=a.uparrowurl,n.style.marginLeft="12px",n.style.transform="rotate(180deg)",i===Object.keys(v).length?n.style.opacity=0:n.addEventListener("click",function(){var e,t=0;for(e in v)if(v[e].ordering===i+1){v[e].ordering--,t=e;break}v[l].ordering++,f(a);var n={courseid:a.courseid,minusqid:t,plusqid:l};w(a.changequestionurl,n,a)});t.appendChild(n);n=document.createElement("button");{var d;n.style.marginLeft="12px",n.addEventListener("click",function(){var e={courseid:a.courseid,id:l,ordering:v[l].ordering,survey:m,deleted:!0};w(a.deletequrl,e,a),delete v[l],f(a)}),n.textContent=a.langstrings.delete,t.appendChild(n),e?((d=document.createElement("button")).textContent=a.langstrings.cancel,d.style.marginLeft="12px",d.addEventListener("click",function(){v[l].oldQType&&(v[l].qtype=v[l].oldQType,"custom"!=v[l].qtype&&"binary"!=v[l].qtype&&"multiple"!=v[l].qtype||(y[l]=v[l].labels,delete v[l].labels),delete v[l].oldQType),delete v[l].edit,h=!1,f(a)}),t.appendChild(d),(d=document.createElement("button")).style.marginLeft="12px",d.addEventListener("click",function(){var e=document.getElementById("question-"+l);if(""!=e.value){for(var t,n=[],i=0;document.getElementById("option-"+l+"-"+i);)""!=(t=document.getElementById("option-"+l+"-"+i)).value&&(n[n.length]=t.value),i++;!(("multiple"==v[l].qtype||"binary"==v[l].qtype)&&n.length<2||"custom"==v[l].qtype&&n.length!=document.getElementById("edit-custom-select").value)?(h=!1,delete v[l].edit,v[l].qtext=e.value,y[l]=n,e={courseid:a.courseid,surveyid:m,questionid:l,qtype:v[l].qtype,qtext:v[l].qtext,qorder:v[l].ordering,labels:n},w(a.questionurl,e,a),f(a)):I(l,a.langstrings.addopterr)}else I(l,a.langstrings.addqerr)}),d.textContent=a.langstrings.save,t.appendChild(d),(d=C(a,l)).addEventListener("change",q.bind(this,a,l)),t.appendChild(d)):((d=document.createElement("button")).style.marginLeft="12px",d.addEventListener("click",function(){h?I(l,a.langstrings.alreadyedit):(h=!0,v[l].edit=!0,f(a))}),d.textContent=a.langstrings.edit,t.appendChild(d))}return t}(e,v[c[o]].ordering,c[o],d),r.appendChild(t),r.appendChild(l)}var g=document.getElementById("question-list");g?document.getElementById("survey-questions").replaceChild(r,g):document.getElementById("survey-questions").appendChild(r)}function x(e,t){var n=document.createElement("input");n.type="radio",n.name="radio",n.disabled=!0,n.style.marginLeft="5px";var i=document.createElement("label");i.appendChild(document.createTextNode(t)),i.appendChild(n),i.style.marginRight="10px",e.appendChild(i)}function E(e,t,n,i,a){var l=document.createElement("input");l.id="radio-"+n+"-"+i,l.type="radio",l.name="radio",l.disabled=!0,l.style.marginRight="10px";var d=document.createElement("input");d.type="text",d.id="option-"+n+"-"+i,a?d.placeholder=t+" "+(i+1):d.value=t,d.appendChild(l),d.style.marginRight="5px",e.appendChild(d),e.appendChild(l)}function o(e,t,n,i){var a=document.createElement("input");a.id="radio-"+n,a.type="radio",a.name="radio",a.disabled=!0,a.style.marginLeft="5px",a.style.marginRight="10px";var l=document.createElement("input");l.type="text",l.id="text-label-"+n,i?l.placeholder=t+" "+(n+1):l.value=t,e.appendChild(l),e.appendChild(a)}function b(e,t,n,i,a){var l=document.createElement("div");l.id="option-div-"+n+"-"+i;var d=document.createElement("input");d.type="checkbox",d.disabled=!0,d.style.marginRight="10px";var r=document.createElement("input");r.type="text",r.id="option-"+n+"-"+i,a?r.placeholder=t+" "+(i+1):r.value=t,r.appendChild(d),r.style.marginRight="5px",l.appendChild(d),l.appendChild(r),e.appendChild(l)}function s(e,t,n){var i=document.createElement("div");i.id="option-div-"+n;var a=document.createElement("input");a.type="checkbox",a.style.marginLeft="5px",a.style.marginRight="10px",a.disabled=!0;var l=document.createElement("input");l.type="text",l.id="text-label-"+n,l.placeholder=t+" "+(n+1),i.appendChild(a),i.appendChild(l),e.appendChild(i)}function C(e,t){var n,i=["yn","tf","binary","gap","and","lnd","egapt","likert","aossn","slnds","custom","multiple","open"],a={};for(n in i)a[i[n]]=e.langstrings[i[n]];var l=document.createElement("select");l.id="edit-qtype-select",l.style.marginLeft="10px";var d,r=document.createElement("option");for(d in r.text=e.langstrings.changeqtype,r.disabled=!0,r.hidden=!0,r.selected=!0,l.appendChild(r),i)v[t].qtype!=i[d]&&((r=document.createElement("option")).text=a[i[d]],r.value=i[d],l.appendChild(r));return l}function q(l,d){var e,t=document.getElementById("edit-qtype-select"),n=t.options[t.selectedIndex].value,r=document.createElement("div");r.id="qdiv-"+d;var i=document.getElementById("question-"+d);v[d].qtext=i.value;i=document.createElement("input");if(i.id="question-"+d,i.type="text",i.value=v[d].qtext,r.appendChild(i),r.appendChild(document.createElement("br")),v[d].oldQType=v[d].qtype,"custom"==v[d].qtype||"binary"==v[d].qtype||"multiple"==v[d].qtype){var a,s=0;for(v[d].labels=[];document.getElementById("option-"+d+"-"+s);)a=document.getElementById("option-"+d+"-"+s),v[d].labels[s++]=a.value}if(v[d].qtype=n,y[d]=[],"binary"==n)for(var o=0;o<2;o++)E(r,l.langstrings.option,d,o,!0);else if("likert"==n)e=l.langstrings.likertscale.split(",");else if("yn"==n)e=l.langstrings.ynscale.split(",");else if("tf"==n)e=l.langstrings.tfscale.split(",");else if("gap"==n)e=l.langstrings.gapscale.split(",");else if("and"==n)e=l.langstrings.andscale.split(",");else if("lnd"==n)e=l.langstrings.lndscale.split(",");else if("egapt"==n)e=l.langstrings.egaptscale.split(",");else if("aossn"==n)e=l.langstrings.aossnscale.split(",");else if("slnds"==n)e=l.langstrings.slndsscale.split(",");else if("custom"==n){var c=document.createElement("select");c.id="edit-custom-select",c.style.marginLeft="10px";var u=document.createElement("option");u.text=l.langstrings.customselect,u.disabled=!0,u.hidden=!0,u.selected=!0,c.appendChild(u);for(var p=2;p<=10;p++)(u=document.createElement("option")).text=p,u.value=p,c.appendChild(u);c.addEventListener("change",function(){for(var e,t,n=0,i=[];document.getElementById("option-"+d+"-"+n);)e=document.getElementById("option-"+d+"-"+n),t=document.getElementById("radio-"+d+"-"+n),""!=e.value&&(i[i.length]=e.value),r.removeChild(e),r.removeChild(t),n++;for(var a=0;a<c.options[c.selectedIndex].value;a++)a<i.length?E(r,i[a],d,a,!1):E(r,l.langstrings.option,d,a,!0)}),document.getElementById("qdiv-header-"+d).appendChild(c)}else if("multiple"==n){for(var g=0;g<2;g++)b(r,l.langstrings.option,d,g,!0);i=document.createElement("button");i.textContent=l.langstrings.addoption,i.id="add-option",i.addEventListener("click",function(){for(var e,t=0;document.getElementById("option-div-"+d+"-"+t);)e=document.getElementById("option-div-"+d+"-"+t),t++;b(e,l.langstrings.option,d,t,!0)}),r.appendChild(i)}else{var m=document.createElement("textarea");m.disabled=!0,r.appendChild(m)}if(e)for(var h in e)x(r,e[h]);m=C(l,d);m.addEventListener("change",q.bind(this,l,d)),document.getElementById("qdiv-header-"+d).replaceChild(m,t),"custom"!=n&&document.getElementById("edit-custom-select")&&document.getElementById("qdiv-header-"+d).removeChild(document.getElementById("edit-custom-select"));n=document.getElementById("qdiv-"+d);document.getElementById("question-list").replaceChild(r,n)}function c(e){var t,n,i=e.qtype.options[e.qtype.selectedIndex].value,a=0;if(""!=e.qText.value){if("binary"==i||"custom"==i)for(;document.getElementById("text-label-"+a);){if(""==(t=document.getElementById("text-label-"+a)).value)return void u(e.langstrings.addopterr);a++}else if("multiple"==i){for(n=[];document.getElementById("text-label-"+a);)""!=(t=document.getElementById("text-label-"+a)).value&&(n[n.length]=1),a++;if(n.length<2)return void u(e.langstrings.addopterr)}if(document.getElementById("questions-title").style.display="block",n=[],"binary"==i||"custom"==i||"multiple"==i)for(a=0;document.getElementById("text-label-"+a);)""!=(t=document.getElementById("text-label-"+a)).value&&(n[n.length]=t.value),a++;var l={courseid:e.courseid,surveyid:m,qtype:i,qtext:e.qText.value,qorder:Object.keys(v).length+1,labels:n};w(e.questionurl,l,e),e.div.removeChild(document.getElementById("question-div")),e.div.removeChild(e.qtype),"custom"==i&&e.div.removeChild(document.getElementById("custom-select")),e.addQ.style.display="block"}else u(e.langstrings.addqerr)}function u(e){var t=document.getElementById("new-survey"),n=document.createElement("p");n.style.color="red",n.appendChild(document.createTextNode(e)),n.appendChild(document.createElement("br")),t.appendChild(n),setTimeout(function(){t.removeChild(n)},2e3)}function I(e,t){var n=document.getElementById("qdiv-"+e),i=document.createElement("p");i.style.color="red",i.appendChild(document.createTextNode(t)),i.appendChild(document.createElement("br")),n.appendChild(i),setTimeout(function(){n.removeChild(i)},2e3)}function w(e,i,a){var t=new XMLHttpRequest;t.open("POST",e),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){if(4==this.readyState&&200==this.status)if(i.title)m=parseInt(this.responseText);else if(i.deleted){for(var e in v)v[e].ordering>i.ordering&&v[e].ordering--;f(a)}else if(i.surveyid){var t,n=parseInt(this.responseText);for(t in v[n]=i,v[n].ordering=i.qorder,y[n]=[],i.labels)y[n][t]=i.labels[t];f(a)}};e=JSON.stringify(i).replaceAll("&","%amp;");t.send("data="+e+"&sesskey="+M.cfg.sesskey)}function g(e,t,n){var i,a,l={};for(i in e)l[e[i]]=1;for(a in t)l[t[a]]=1;return(n/Object.keys(l).length*100).toFixed(0)}function B(n,e,i,a){for(var t=window.dataDrivenDocs,l=100+25*n.length,d=0,r=20,s=30,o=140,c=i?["#003f5c","#bc5090","#ffa600"]:["#488f31","#489a68","#78ab63","#a8ba61","#dac767","#dfa850","#e18745","#de6347","#de425b"],u=[],p=n.length-1;0<=p;p--)u[u.length]=n[p];var g,m=0;for(g in n=u)"system"==n[g].type&&(m+=n[g].memberCount);var h=t.scaleOrdinal().domain(n).range(c),v=t.scaleBand().domain(t.range(n.length)).range([l-s,d]).padding(.1),y=t.scaleLinear().domain([0,m]).range([o,800-r]),e=t.select(e).append("svg").attr("viewBox",[0,0,800,l]).attr("id","graph-svg");e.selectAll(".bar").data(n).enter().append("g").append("rect").attr("class","bar").attr("id",function(e){return e.type+"-"+e.cluster}).attr("fill",function(e,t){return h(t)}).attr("y",function(e,t){return v(t)}).attr("x",function(){return y(0)}).attr("width",function(e){return y(e.memberCount)-y(0)}).attr("height",v.bandwidth()).append("title").text(function(e){return e.percent?e.percent+"% - "+e.members:e.members}).style("display","none").on("mouseover",function(e){t.select("#"+e.type+"-"+e.cluster).style("dislpay","block")}).on("mouseout",function(e){t.select("#"+e.type+"-"+e.cluster).style("dislpay","none")}),e.append("g").call(function(e){e.attr("transform","translate(0,"+(l-s)+")").call(t.axisBottom(y)).selectAll("text").style("font-size","2.5em")}),e.append("g").call(function(e){e.attr("transform","translate("+o+",0)").call(t.axisLeft(v).tickFormat(function(e){var t=a.cluster;return(t=i?"system"==n[e].type?a.system:"manual"==n[e].type?a.manual:a.diff:t)+" "+n[e].cluster}).tickSizeOuter(0)).selectAll("text").style("font-size","2.5em")})}function i(e){var t,n,i,a;if(window.dataDrivenDocs.selectAll("svg").remove(),e)for(a in n=[k.langstrings.active,k.langstrings.sensing,k.langstrings.visual,k.langstrings.sequential,k.langstrings.reflective,k.langstrings.intuitive,k.langstrings.verbal,k.langstrings.global],i={width:600,height:600,domain:11,range:230,tOffset:0},O(t=l(k.lsdata,n,"avg8dim",k.namemap),n,i).append("text").text(k.langstrings.courseaverage).attr("x",i.width/2-k.langstrings.courseaverage.length/2*8).attr("y",i.height-20),i={width:300,height:300,domain:11,range:100,tOffset:0},t=l(k.lsdata,n,"all8dim",k.namemap))O([t[a]],n,i).append("text").text(t[a].studentName).attr("x",i.width/2-t[a].studentName.length/2*8).attr("y",i.height-20);else for(a in n=[k.langstrings.active+"/"+k.langstrings.reflective,k.langstrings.sensing+"/"+k.langstrings.intuitive,k.langstrings.visual+"/"+k.langstrings.verbal,k.langstrings.sequential+"/"+k.langstrings.global],i={width:600,height:600,domain:22,range:230,tOffset:-11},O(t=l(k.lsdata2,n,"avg4dim",k.namemap),n,i).append("text").text(k.langstrings.courseaverage).attr("x",i.width/2-k.langstrings.courseaverage.length/2*8).attr("y",i.height-20),i={width:300,height:300,domain:22,range:100,tOffset:-11},t=l(k.lsdata2,n,"all4dim",k.namemap))O([t[a]],n,i).append("text").text(t[a].studentName).attr("x",i.width/2-t[a].studentName.length/2*8).attr("y",i.height-20)}function O(n,l,i){for(var e,a=window.dataDrivenDocs,d=i.width||600,t=i.height||600,r=i.domain||11,s=i.range||230,o=i.tOffset||0,c=i.divId||"lsradar",u=a.select("#"+c).append("svg").attr("class","radar").attr("width",d).attr("height",t).style("float","left").on("click",function(){var e,t;n[0].studentName!=k.langstrings.courseaverage&&(L&&(a.select("#big-student-radar").remove(),i.width/=2,i.height/=2,i.range=k.showlsradar?100:i.range/2,delete i.divId,L=!1),(e=document.createElement("div")).id="big-student-radar",e.style.width=2*i.width,e.style.height=2*i.height,e.style.position="absolute",e.style.left=window.innerWidth/2-i.width+"px",e.style.top=a.event.pageY-400+"px",e.style.border="3px solid "+n[0].colour,e.style.backgroundColor="lightgrey",document.getElementById("lsradar").appendChild(e),L=!0,i.width*=2,i.height*=2,i.range=k.showlsradar?230:2*i.range,i.divId=e.id,(t=O(n,l,i)).append("text").text(n[0].studentName).attr("x",i.width/2-n[0].studentName.length/2*8).attr("y",i.height-20),t.on("click",function(){i.width/=2,i.height/=2,i.range=k.showlsradar?100:i.range/2,delete i.divId,document.getElementById("lsradar").removeChild(e),L=!1}))}),p=a.scaleLinear().domain([0,r]).range([0,s]),g=[],m=1;m<=r;m++)g.push(m);for(e in g)u.append("circle").attr("cx",d/2).attr("cy",t/2).attr("fill","none").attr("stroke","gray").attr("r",p(g[e]));function h(e,t){var n=Math.cos(e)*p(t),t=Math.sin(e)*p(t);return{x:d/2+n,y:d/2-t}}for(m=0;m<l.length;m++){var v=l[m],y=Math.PI/2+2*Math.PI*m/l.length,f=h(y,r);u.append("line").attr("x1",d/2).attr("y1",d/2).attr("x2",f.x).attr("y2",f.y).attr("stroke","black")}var x=a.line().x(function(e){return e.x}).y(function(e){return e.y}),E=a.select("#lsradar").append("div").attr("class","tooltip").style("opacity",0).style("background-color","white").style("border","solid").style("border-radius","5px").style("padding","5px");for(m=0;m<n.length;m++){var b,C,q=n[m],I=function(e){var t=[],n=l[l.length-1],i=Math.PI/2+2*Math.PI*(l.length-1)/l.length;t.push(h(i,e[n]));for(var a=0;a<l.length;a++)n=l[a],i=Math.PI/2+2*Math.PI*a/l.length,t.push(h(i,e[n]));return t}(q),w="";for(C in l)b=Math.round(100*(q[l[C]]+o))/100,w+=l[C]+" "+b+", ";w=w.substring(0,w.length-2),u.append("path").datum(I).attr("id",q.studentName+": "+w).attr("d",x).attr("stroke-width",5).attr("stroke",q.colour).attr("fill","none").on("mouseover",function(){E.style("opacity",1)}).on("mousemove",function(){var e=a.event.pageX;100<a.event.pageX-a.event.layerX&&(e-=280),E.html(this.id).style("left",e+"px").style("top",a.event.pageY-170+"px")}).on("mouseout",function(){E.style("opacity",0)})}for(e in g)u.append("text").attr("x",d/2+5).attr("y",t/2-p(g[e])).style("pointer-events","none").text(r<6||(o+g[e])%2==0?(o+g[e]).toString():"");for(m=0;m<l.length;m++){v=l[m],y=Math.PI/2+2*Math.PI*m/l.length;var B=h(y,r+.5);u.append("text").attr("x",B.x-40).attr("y",B.y).style("pointer-events","none").text(v)}return u}function l(e,t,n,i){var a,l,d,r,s,o=[],c=window.dataDrivenDocs,u=c.scaleOrdinal(c.schemeCategory10),p=0;if("all4dim"==n)for(d in e){for(l in a={},t)r=t[l].split("/"),e[d][r[0]]>e[d][r[1]]?a[t[l]]=11+e[d][r[0]]:a[t[l]]=11-e[d][r[1]];a.studentName=i[d],a.colour=u(p++),o.push(a)}else if("avg4dim"==n){for(d in a={},e)for(l in t)r=t[l].split("/"),s=e[d][r[0]]>e[d][r[1]]?11+e[d][r[0]]:11-e[d][r[1]],a[t[l]]?a[t[l]]+=s:a[t[l]]=s;for(l in t)a[t[l]]=a[t[l]]/Object.keys(e).length;a.studentName=k.langstrings.courseaverage,a.colour=u(p++),o.push(a)}else if("avg8dim"==n){for(d in a={},e)for(l in t)a[t[l]]?a[t[l]]+=e[d][t[l]]:a[t[l]]=e[d][t[l]];for(l in t)a[t[l]]=a[t[l]]/Object.keys(e).length;a.studentName=k.langstrings.courseaverage,a.colour=u(p++),o.push(a)}else for(d in e)e[d].studentName=i[d],e[d].colour=u(p++),o.push(e[d]);return o}(e=k).newsurvey||e.managesurvey?function(e){var t,n=document.getElementById("new-survey");if(e.newsurvey)(t=document.createElement("input")).type="text",t.id="survey-title",t.placeholder=e.langstrings.surveytitle,n.appendChild(t),n.appendChild(document.createElement("br"));else{for(var i in(t=document.createElement("h3")).textContent=e.survey.title,n.appendChild(t),m=e.survey.id,e.questions)for(var a in v[i]=e.questions[i],v[i].ordering=parseInt(v[i].ordering),y[i]=[],e.qoptions[i])y[i][a]=e.qoptions[i][a];f(e)}var l=document.createElement("button");l.textContent=e.langstrings.addquestion,e.title=t,e.div=n,(e.addQ=l).addEventListener("click",function(e){if("text"!=e.title.type||""!=e.title.value){var t;0===m&&(w(e.surveyurl,{courseid:e.courseid,title:e.title.value},!0),(t=document.createElement("h3")).textContent=e.title.value,e.div.replaceChild(t,e.title));var n,i=["yn","tf","binary","gap","and","lnd","egapt","likert","aossn","slnds","custom","multiple","open"],a={};for(n in i)a[i[n]]=e.langstrings[i[n]];var l=document.createElement("select");l.id="qtype-select",e.qtype=l;var d,r=document.createElement("option");for(d in r.text=e.langstrings.qtype,r.disabled=!0,r.hidden=!0,r.selected=!0,l.appendChild(r),i)(r=document.createElement("option")).text=a[i[d]],r.value=i[d],l.appendChild(r);l.addEventListener("change",function(e){document.getElementById("question-div")&&(a=document.getElementById("qtext").value,e.div.removeChild(document.getElementById("question-div")),document.getElementById("custom-select")&&e.div.removeChild(document.getElementById("custom-select")));var t=document.createElement("div");t.id="question-div";var n=document.createElement("textarea");n.id="qtext",a?n.value=a:n.placeholder=e.langstrings.qtext;e.qText=n,t.appendChild(n),t.appendChild(document.createElement("br"));var i,a=e.qtype.options[e.qtype.selectedIndex].value;if("binary"==a)for(var l=0;l<2;l++)o(t,e.langstrings.option,l,!0);else"likert"==a?i=e.langstrings.likertscale.split(","):"yn"==a?i=e.langstrings.ynscale.split(","):"tf"==a?i=e.langstrings.tfscale.split(","):"gap"==a?i=e.langstrings.gapscale.split(","):"and"==a?i=e.langstrings.andscale.split(","):"lnd"==a?i=e.langstrings.lndscale.split(","):"egapt"==a?i=e.langstrings.egaptscale.split(","):"aossn"==a?i=e.langstrings.aossnscale.split(","):"slnds"==a?i=e.langstrings.slndsscale.split(","):"custom"==a?function(d,r){var s=document.createElement("select");s.id="custom-select";var e=document.createElement("option");e.text=d.langstrings.customselect,e.disabled=!0,e.hidden=!0,e.selected=!0,s.appendChild(e);for(var t=2;t<=10;t++)(e=document.createElement("option")).text=t,e.value=t,s.appendChild(e);s.addEventListener("change",function(){var e=[];if(document.getElementById("savequestion")){r.removeChild(document.getElementById("savequestion")),r.removeChild(document.getElementById("savequestionbreak"));for(var t,n=0;document.getElementById("text-label-"+n);)""!=(t=document.getElementById("text-label-"+n)).value&&(e[e.length]=t.value),r.removeChild(t),r.removeChild(document.getElementById("radio-"+n)),n++}for(var i=0;i<s.options[s.selectedIndex].value;i++)i<e.length?o(r,e[i],i,!1):o(r,d.langstrings.option,i,!0);var a=document.createElement("button");a.id="savequestion",a.textContent=d.langstrings.save,a.addEventListener("click",c.bind(this,d));var l=document.createElement("br");l.id="savequestionbreak",r.appendChild(l),r.appendChild(a)}),d.div.appendChild(s)}(e,t):"multiple"==a?function(n,e){for(var t=0;t<2;t++)s(e,n.langstrings.option,t);var i=document.createElement("button");i.textContent=n.langstrings.addoption,i.id="add-option",i.addEventListener("click",function(){for(var e,t=0;document.getElementById("option-div-"+t);)e=document.getElementById("option-div-"+t),t++;s(e,n.langstrings.option,t)}),e.appendChild(i)}(e,t):((n=document.createElement("textarea")).disabled=!0,t.appendChild(n));if(i)for(var d in i)x(t,i[d]);"custom"!=a&&((a=document.createElement("button")).id="savequestion",a.textContent=e.langstrings.save,a.addEventListener("click",c.bind(this,e)),t.appendChild(document.createElement("br")),t.appendChild(a));e.div.appendChild(t)}.bind(this,e)),l.appendChild(document.createElement("br")),e.div.appendChild(l),e.addQ.style.display="none"}else u(e.langstrings.surveytitleerr)}.bind(this,e)),n.appendChild(l),n.appendChild(document.createElement("br"));n=document.getElementById("questions-title");n.style.display=0<Object.keys(e.questions).length?"block":"none",n.appendChild(document.createTextNode(e.langstrings.questionstitle))}(e):e.showlsradar?function(){var e=document.createElement("button");e.textContent=k.langstrings.show8dim;var t=!0;e.addEventListener("click",function(){window.dataDrivenDocs.select("#big-student-radar").remove(),L=!1,i(t),t=t?(e.textContent=k.langstrings.show4dim,!1):(e.textContent=k.langstrings.show8dim,!0)});var n=document.getElementById("lsradar");n.appendChild(e),n.appendChild(document.createElement("br")),i(!1)}():e.showbfiradar?function(){var e,t,n=[k.langstrings.extraversion,k.langstrings.agreeable,k.langstrings.conscientiousness,k.langstrings.neuroticism,k.langstrings.openness],i={width:500,height:500,domain:5,range:180,tOffset:0},a=O(e=l(k.lsdata,n,"avg8dim",k.namemap),n,i);for(t in a.append("text").text(k.langstrings.courseaverage).attr("x",i.width/2-k.langstrings.courseaverage.length/2*8).attr("y",i.height-20),i={width:250,height:250,domain:5,range:90,tOffset:0},e=l(k.lsdata,n,"",k.namemap))(a=O([e[t]],n,i)).append("text").text(e[t].studentName).attr("x",i.width/2-e[t].studentName.length/2*8).attr("y",i.height-20)}():function(e){var t=e.membermap,n=[],i=[],a=[],l=[],d=null,r=null,s=null,o=null,c=null,u=null;if(e.iteration)for(s in t)for(d in t[s])for(r in t[s][d])for(var p in t[s][d][r]){for(o in n=[],t[s][d][r][p])if(a=t[s][d][r][p][o][0].split(", "),l=t[s][d][r][p][o][1].split(", "),n[n.length]={members:t[s][d][r][p][o][0],memberCount:a.length,cluster:o,type:"system"},0<t[s][d][r][p][o][1].length){for(c in n[n.length]={members:t[s][d][r][p][o][1],memberCount:l.length,cluster:o,type:"manual"},i=[],a)-1===l.indexOf(a[c])&&(i[i.length]=a[c]);for(u in l)-1===a.indexOf(l[u])&&(i[i.length]=l[u]);n[n.length]={members:i.toString(),memberCount:i.length,cluster:o,type:"diff",percent:g(a,l,i.length)}}B(n,"#pie"+r+"-"+p,3*t[s][d][r][p].length==n.length,e.langstrings)}else for(s in t)for(d in t[s])for(r in t[s][d]){for(o in n=[],t[s][d][r])if(a=t[s][d][r][o][0].split(", "),l=t[s][d][r][o][1].split(", "),n[n.length]={members:t[s][d][r][o][0],memberCount:a.length,cluster:o,type:"system"},0<t[s][d][r][o][1].length){for(c in n[n.length]={members:t[s][d][r][o][1],memberCount:l.length,cluster:o,type:"manual"},i=[],a)-1===l.indexOf(a[c])&&(i[i.length]=a[c]);for(u in l)-1===a.indexOf(l[u])&&(i[i.length]=l[u]);n[n.length]={members:i.toString(),memberCount:i.length,cluster:o,type:"diff",percent:g(a,l,i.length)}}B(n,"#pie"+r,3*t[s][d][r].length==n.length,e.langstrings)}}(e)}});
//# sourceMappingURL=dashboard.min.js.map